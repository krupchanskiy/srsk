# Инструкция: Создание аккаунтов для команды

## Быстрый способ (рекомендуется)

### Шаг 1: Получите Service Role Key

1. Откройте [Supabase Dashboard](https://supabase.com/dashboard/project/llttmftapmwebidgevmg)
2. Перейдите в **Settings → API**
3. Найдите секцию **Project API keys**
4. Скопируйте ключ **service_role** (secret)

⚠️ **ВАЖНО:** Этот ключ даёт полный доступ к базе данных. Никому не передавайте!

### Шаг 2: Запустите скрипт создания

1. Откройте файл `admin-create-accounts.html` в текстовом редакторе
2. Найдите строку 37: `const SERVICE_ROLE_KEY = '';`
3. Вставьте Service Role Key между кавычками:
   ```javascript
   const SERVICE_ROLE_KEY = 'eyJhbGc...ваш_ключ';
   ```
4. Сохраните файл
5. Откройте `admin-create-accounts.html` в браузере
6. Нажмите кнопку **"Создать аккаунты"**
7. Дождитесь завершения (будет создано 20 аккаунтов)

### Шаг 3: Удалите Service Role Key

⚠️ **ОБЯЗАТЕЛЬНО после создания аккаунтов:**

1. Откройте `admin-create-accounts.html` снова
2. Удалите Service Role Key из строки 37:
   ```javascript
   const SERVICE_ROLE_KEY = ''; // ← верните пустую строку
   ```
3. Сохраните файл
4. **НЕ коммитьте** файл с ключом в Git!

---

## Список создаваемых аккаунтов

Скрипт создаст 20 аккаунтов с паролем **`rupaseva`**:

1. adrian@adrian.ru (Ачинтья Кришна дас)
2. amalakamala@rupaseva.com (Амала-Камала деви даси)
3. anangamanjari@rupaseva.com (Ананга-Манджари деви даси)
4. и так далее...

*(Полный список можно увидеть в `supabase/072_create_team_accounts.sql`)*

---

## Альтернативный способ (через Supabase Dashboard)

Если не хотите использовать Service Role Key:

1. Откройте [Supabase Dashboard → Authentication → Users](https://supabase.com/dashboard/project/llttmftapmwebidgevmg/auth/users)
2. Нажмите **"Invite user"** для каждого из 20 человек
3. Введите email из списка выше
4. Установите пароль: `rupaseva`
5. Снимите галочку **"Send email confirmation"** (если не хотите отправлять письма)
6. Нажмите **"Invite user"**
7. Повторите для всех 20 человек

⚠️ Это займёт больше времени, но безопаснее.

---

## После создания аккаунтов

1. Проверьте, что все 20 аккаунтов созданы в Dashboard → Authentication → Users
2. Протестируйте вход с одним из аккаунтов:
   - Откройте https://in.rupaseva.com/login.html
   - Введите email и пароль `rupaseva`
   - Убедитесь, что перенаправляет на главную страницу
3. Проверьте кнопку выхода в правом верхнем углу
4. Раздайте команде их email'ы и пароль

---

## Что дальше?

После успешного тестирования:

1. Добавить `auth-check.js` на все остальные страницы (сейчас защищён только index.html)
2. Добавить кнопку выхода в header всех страниц
3. Протестировать полностью
4. Смержить ветку `auth` в `main`
5. Деплой произойдёт автоматически на GitHub Pages

---

## Безопасность

- ✅ Все пользователи будут использовать email + пароль
- ✅ Сессия хранится в Supabase (защищённо)
- ✅ Все страницы защищены `auth-check.js`
- ⚠️ Начальный пароль `rupaseva` простой - рекомендуйте команде сменить его через профиль
- ⚠️ Service Role Key даёт полный доступ - храните в секрете!
