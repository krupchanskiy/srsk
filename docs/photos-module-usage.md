# Инструкция по использованию модуля фотографий

Этот документ описывает, как пользоваться модулем фотографий для фотографов и гостей.

---

## Для фотографов

### 1. Загрузка фотографий

**URL:** `/photos/upload.html`

**Шаги:**

1. **Выберите ретрит** из выпадающего списка
2. **Укажите день ретрита** (опционально) — для группировки фото по дням
3. **Загрузите фотографии:**
   - Перетащите файлы в зону загрузки (Drag & Drop)
   - Или нажмите на зону и выберите файлы
4. **Проверьте превью** загруженных фото
5. **Нажмите "Загрузить"**

**Во время загрузки:**
- Показывается список файлов с прогрессом
- Статус каждого файла: Ожидание → Загрузка → ✓ Загружено / ✗ Ошибка
- Общий прогресс: загружено фото / всего фото
- Скорость загрузки (фото/сек)

**После загрузки:**
- Фотографии автоматически индексируются AI для распознавания лиц
- Индексация происходит в фоне (не нужно ждать)
- Можно сразу загружать следующую партию фото

**Требования к фото:**
- Формат: JPEG, JPG, PNG
- Максимальный размер: 50 МБ
- Рекомендуемое разрешение: 1920×1080 и выше

**Важно:**
- Не закрывайте страницу до завершения загрузки!
- Если загрузка прервалась — уже загруженные фото сохранятся
- Можно нажать "Пауза" и потом "Продолжить"

---

### 2. Управление фотографиями

**URL:** `/photos/manage.html`

**Возможности:**

#### Просмотр фото:
1. Выберите ретрит
2. Фотографии отображаются сеткой
3. Нажмите на фото для просмотра в полноэкранном режиме (lightbox)
4. Используйте стрелки или клавиши ← → для навигации
5. Нажмите кнопку "Скачать" для сохранения фото

#### Фильтрация:
- **По статусу индексации:**
  - Все фото
  - Проиндексированные (AI обработал)
  - Ожидают индексации
  - Ошибки индексации

#### Статистика:
- Всего фото
- Проиндексировано
- В ожидании
- Ошибки

#### Удаление фото:
1. Выберите фото (чекбоксы в левом верхнем углу)
2. Или нажмите "Выбрать все"
3. Нажмите "Удалить выбранные"
4. Подтвердите удаление

**Важно:** Удаление необратимо! Фото удалятся из хранилища и базы данных.

#### Переиндексация:
1. Нажмите кнопку "Переиндексировать"
2. Подтвердите действие
3. AI заново обработает все фото ретрита

**Когда нужна переиндексация:**
- После замены фотографий
- Если индексация упала с ошибками
- После обновления алгоритма распознавания

---

## Для гостей

### 1. Просмотр фотографий

**URL:** `/guest-portal/photos.html`

**Возможности:**

#### Фильтрация:
- **По ретриту** — если вы участвовали в нескольких ретритах
- **По дню** — фото группируются по дням ретрита
- **Фото со мной** — показывать только фото, где вы есть (после использования "Найти себя")

#### Просмотр:
- Фотографии отображаются сеткой, сгруппированные по дням
- Нажмите на фото для просмотра в полноэкранном режиме
- Используйте стрелки или клавиши ← → для навигации
- Нажмите кнопку "Скачать" для сохранения фото

---

### 2. Поиск себя на фотографиях

**Функция "Найти себя"** использует AI для автоматического поиска всех фото, где вы есть.

**Как это работает:**

1. **Нажмите кнопку "Найти себя"**
2. **Загрузите своё селфи:**
   - Выберите чёткое фото своего лица
   - Желательно без солнцезащитных очков
   - Анфас или полуанфас (не профиль)
3. **Дождитесь результата:**
   - AI сравнит ваше лицо со всеми фото ретрита
   - Поиск занимает 10-30 секунд
4. **Результат:**
   - "Найдено X фото с вами!"
   - Фото с вами отмечаются бейджем "Вы"
   - Включается фильтр "Фото со мной"

**Советы для лучшего результата:**
- Используйте чёткое фото лица (не размытое)
- Лицо должно быть хорошо видно (не в тени, не боком)
- Селфи должно быть сделано недавно (соответствовать вашей внешности)
- Если результат неудовлетворительный — попробуйте другое селфи

**Важно:**
- Селфи используется только для поиска и сразу удаляется
- Ваши данные не передаются третьим лицам
- Результаты поиска сохраняются для вашего удобства

---

### 3. Скачивание фотографий

#### Скачать одно фото:
1. Откройте фото в полноэкранном режиме (lightbox)
2. Нажмите кнопку "Скачать"

#### Скачать несколько фото (ZIP-архив):
1. Выберите фото (чекбоксы в левом верхнем углу)
2. Или нажмите "Выбрать все"
3. Нажмите "Скачать ZIP"
4. Дождитесь создания архива
5. Архив автоматически скачается

**Советы:**
- Для скачивания всех фото с ретрита используйте ZIP
- Для скачивания только фото с вами:
  1. Включите фильтр "Фото со мной"
  2. Нажмите "Выбрать все"
  3. Скачайте ZIP

---

## FAQ

### Q: Сколько времени занимает индексация фото?

**A:** AI обрабатывает ~10-20 фото в секунду. Для ретрита на 700 фото — примерно 1-2 минуты.

---

### Q: Можно ли удалить своё фото с ретрита?

**A:** Нет, гости не могут удалять фото. Обратитесь к администратору или фотографу.

---

### Q: Почему "Найти себя" не нашёл меня на некоторых фото?

**A:** Возможные причины:
- Лицо слишком маленькое (групповое фото издалека)
- Лицо повёрнуто боком или закрыто
- Плохое освещение
- Селфи не соответствует вашей внешности на ретрите

Попробуйте:
- Загрузить другое селфи
- Проверить фото вручную (возможно, AI пропустил)

---

### Q: Можно ли искать другого человека на фото?

**A:** Нет, функция "Найти себя" работает только для вашего профиля. Каждый гость может найти только свои фото.

---

### Q: Как долго хранятся фотографии?

**A:** Фотографии хранятся постоянно. Ретриты не удаляются из архива.

---

### Q: Можно ли поделиться фото в соцсетях?

**A:** Да, после скачивания фото вы можете использовать его как угодно. Но помните об этике — спросите разрешения других людей на фото перед публикацией.

---

## Техподдержка

**Проблемы с загрузкой фото:**
- Проверьте формат файла (JPEG, PNG)
- Проверьте размер файла (не более 50 МБ)
- Попробуйте другой браузер (Chrome, Firefox, Safari)

**Проблемы с поиском лиц:**
- Убедитесь, что фото проиндексированы (статус "Проиндексировано")
- Попробуйте другое селфи
- Обратитесь к администратору для ручной проверки

**Другие вопросы:**
- Напишите администратору в системе ШРСК
- Email: support@rupaseva.com (при наличии)
