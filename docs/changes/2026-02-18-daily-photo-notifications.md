# –ü—Ä–∞–≤–∫–∏ –æ—Ç 18.02.2026: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ + –§–∏–∫—Å –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ –∑–∞–≥—Ä—É–∑–∫–∏

## –ü—Ä–æ–±–ª–µ–º–∞ 1: –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ö–ª–∏–µ–Ω—Ç—ã –∂–∞–ª–æ–≤–∞–ª–∏—Å—å, —á—Ç–æ –ø–æ–ª—É—á–∞—é—Ç **–¥–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ –≤ —Ä–µ—Ç—Ä–∏—Ç–µ.

### –ü—Ä–∏—á–∏–Ω–∞

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –¥–≤–∞–∂–¥—ã:
1. –ò–∑ –∫–ª–∏–µ–Ω—Ç–∞ (`photos/js/upload.js`) ‚Äî –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è polling –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
2. –ò–∑ Edge Function (`index-faces/index.ts`) ‚Äî –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±–∞—Ç—á–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

### –†–µ—à–µ–Ω–∏–µ

–í–º–µ—Å—Ç–æ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ‚Äî **–µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –≤ 19:00 IST** —Å–æ —Å–≤–æ–¥–∫–æ–π –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ –ø–æ –≤—Å–µ–º —Ä–µ—Ç—Ä–∏—Ç–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ –æ—á–∏—â–∞–µ—Ç—Å—è –∫–µ—à —Ñ–æ—Ç–æ –∫ –∑–∞–≥—Ä—É–∑–∫–µ

–§–æ—Ç–æ–≥—Ä–∞—Ñ –∂–∞–ª–æ–≤–∞–ª—Å—è: –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ 5 —Ñ–æ—Ç–æ, –∞ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ 10 –Ω–æ–≤—ã—Ö ‚Äî –≤ –æ—á–µ—Ä–µ–¥—å –ø–æ–ø–∞–¥–∞—é—Ç –≤—Å–µ 15 —Ñ–æ—Ç–æ (5 —Å—Ç–∞—Ä—ã—Ö + 10 –Ω–æ–≤—ã—Ö).

### –ü—Ä–∏—á–∏–Ω–∞

–ú–∞—Å—Å–∏–≤ `selectedFiles` –Ω–µ –æ—á–∏—â–∞–ª—Å—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å", —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë".

### –†–µ—à–µ–Ω–∏–µ

- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `currentUploadBatch` ‚Äî —Ö—Ä–∞–Ω–∏—Ç —Ñ–∞–π–ª—ã —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ó–∞–≥—Ä—É–∑–∏—Ç—å" ‚Äî `selectedFiles` —Å—Ä–∞–∑—É –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ `currentUploadBatch` –∏ –æ—á–∏—â–∞–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ç–æ, –ø–æ–∫–∞ —Å—Ç–∞—Ä—ã–µ –≥—Ä—É–∑—è—Ç—Å—è
- –í—Å—è –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ retry —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `currentUploadBatch`

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å:

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**
1. –§–æ—Ç–æ–≥—Ä–∞—Ñ –≤—ã–±–∏—Ä–∞–µ—Ç 5 —Ñ–æ—Ç–æ ‚Üí –≤–∏–¥–∏—Ç –ø—Ä–µ–≤—å—é (5 —Ñ–æ—Ç–æ)
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞–≥—Ä—É–∑–∏—Ç—å" ‚Üí –ø—Ä–µ–≤—å—é –∏—Å—á–µ–∑–∞–µ—Ç, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
3. –í—ã–±–∏—Ä–∞–µ—Ç –µ—â—ë 10 —Ñ–æ—Ç–æ ‚Üí –≤–∏–¥–∏—Ç –ø—Ä–µ–≤—å—é (10 —Ñ–æ—Ç–æ)
4. –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞–≥—Ä—É–∑–∏—Ç—å" ‚Üí –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ 10 –Ω–æ–≤—ã—Ö

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**
1. –§–æ—Ç–æ–≥—Ä–∞—Ñ –≤—ã–±–∏—Ä–∞–µ—Ç 5 —Ñ–æ—Ç–æ ‚Üí –Ω–∞–∂–∏–º–∞–µ—Ç "–ó–∞–≥—Ä—É–∑–∏—Ç—å"
2. –ü–æ–∫–∞ –≥—Ä—É–∑—è—Ç—Å—è 5 —Ñ–æ—Ç–æ, –≤—ã–±–∏—Ä–∞–µ—Ç –µ—â—ë 10
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞–≥—Ä—É–∑–∏—Ç—å" —Å–Ω–æ–≤–∞ ‚Üí **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** –≥—Ä—É–∑—è—Ç—Å—è 2 –ø–∞—Ä—Ç–∏–∏ (5 + 10)

**–î–æ —Ñ–∏–∫—Å–∞:**
- 5 —Ñ–æ—Ç–æ + 10 —Ñ–æ—Ç–æ = 15 —Ñ–æ—Ç–æ –≤ –æ–¥–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ ‚ùå

**–ü–æ—Å–ª–µ —Ñ–∏–∫—Å–∞:**
- 5 —Ñ–æ—Ç–æ ‚Üí –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- 10 —Ñ–æ—Ç–æ ‚Üí –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ ‚úÖ

### –ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
```
üì∏ –ù–æ–≤—ã–µ —Ñ–æ—Ç–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è!

–ó–∏–º–Ω–∏–π —Ä–µ—Ç—Ä–∏—Ç: 23 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
–ö–∞—Ä—Ç–∏–∫–∞-–ø—É—Ä–Ω–∏–º–∞: 15 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏: https://in.rupaseva.com/guest-portal/photos.html
```

---

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

**–ò—Ç–æ–≥–æ: 2 –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã –≤ –æ–¥–Ω–æ–º —Ä–µ–ª–∏–∑–µ**

### 1. –°–æ–∑–¥–∞–Ω–∞ Edge Function `daily-photo-notifications`
- **–§–∞–π–ª**: `supabase/functions/daily-photo-notifications/index.ts`
- **–õ–æ–≥–∏–∫–∞**:
  - –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º Telegram (`telegram_chat_id IS NOT NULL`)
  - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞—Ö–æ–¥–∏—Ç –µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ—Ç—Ä–∏—Ç—ã (—á–µ—Ä–µ–∑ `retreat_registrations`)
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–æ–≤—ã–µ —Ñ–æ—Ç–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è (`uploaded_at >= –Ω–∞—á–∞–ª–æ –¥–Ω—è –ø–æ IST`)
  - –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ç–æ ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç **–æ–¥–Ω–æ** —Å–≤–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  - Rate limiting: 25 msg/sec (–ª–∏–º–∏—Ç Telegram <30)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤ (403) ‚Äî –æ–±–Ω—É–ª—è–µ—Ç `telegram_chat_id`

### 2. –£–±—Ä–∞–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**`photos/js/upload.js`:**
- –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `sendNewPhotosNotification()`
- –£–¥–∞–ª—ë–Ω —Ñ–ª–∞–≥ `notificationSent`
- –£–¥–∞–ª—ë–Ω –≤—ã–∑–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑ polling –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

**`supabase/functions/index-faces/index.ts`:**
- –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `checkAndNotifyIfIndexingComplete()`
- –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `pluralizePhotos()` (–¥—É–±–ª–∏–∫–∞—Ç)
- –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `daily-photo-notifications`

### 3. –§–∏–∫—Å –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ

**`photos/js/upload.js`:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `currentUploadBatch` ‚Äî —Ö—Ä–∞–Ω–∏—Ç —Ñ–∞–π–ª—ã —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –í `startUpload()`:
  - `selectedFiles` –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ `currentUploadBatch`
  - `selectedFiles` —Å—Ä–∞–∑—É –æ—á–∏—â–∞–µ—Ç—Å—è
  - `fileInput.value` –æ—á–∏—â–∞–µ—Ç—Å—è
  - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `updatePreview()` –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –ø—Ä–µ–≤—å—é
- –í—Å—è –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ `currentUploadBatch`:
  - –¶–∏–∫–ª –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
  - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
  - –†–∞—Å—á—ë—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏
- –§—É–Ω–∫—Ü–∏—è `retryFile()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `currentUploadBatch`
- –§—É–Ω–∫—Ü–∏—è `renderFileList()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä
- –§—É–Ω–∫—Ü–∏—è `resetForm()` –æ—á–∏—â–∞–µ—Ç –æ–±–∞ –º–∞—Å—Å–∏–≤–∞ (`selectedFiles` –∏ `currentUploadBatch`)

### 3. –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- **–§–∞–π–ª**: `supabase/133_setup_daily_photo_notifications_cron.sql`
- –í–∫–ª—é—á–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `pg_cron` –∏ `pg_net`
- –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ cron —á–µ—Ä–µ–∑ Dashboard

---

## –î–µ–ø–ª–æ–π –≤ production

### 1. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å Edge Functions

```bash
supabase functions deploy index-faces --project-ref llttmftapmwebidgevmg --no-verify-jwt
supabase functions deploy daily-photo-notifications --project-ref llttmftapmwebidgevmg --no-verify-jwt
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron –≤ Supabase Dashboard

1. –û—Ç–∫—Ä—ã—Ç—å: https://supabase.com/dashboard/project/llttmftapmwebidgevmg/database/cron-jobs
2. –ù–∞–∂–∞—Ç—å **"Create a new cron job"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å:
   - **Name**: `daily-photo-notifications`
   - **Schedule**: `30 13 * * *` (13:30 UTC = 19:00 IST)
   - **SQL command**:
     ```sql
     SELECT net.http_post(
       url := 'https://llttmftapmwebidgevmg.supabase.co/functions/v1/daily-photo-notifications',
       headers := '{"Content-Type": "application/json", "Authorization": "Bearer [SERVICE_ROLE_KEY]"}'::jsonb,
       body := '{}'::jsonb
     );
     ```
4. –ó–∞–º–µ–Ω–∏—Ç—å `[SERVICE_ROLE_KEY]` –Ω–∞ –∫–ª—é—á –∏–∑ **Settings ‚Üí API ‚Üí service_role key (secret)**
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### 3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é

```bash
curl -X POST \
  'https://llttmftapmwebidgevmg.supabase.co/functions/v1/daily-photo-notifications' \
  -H 'Authorization: Bearer [ANON_KEY]' \
  -H 'Content-Type: application/json' \
  -d '{}'

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"ok":true,"sent":0,"failed":0,"blocked":0,"total":0}
# (0 –µ—Å–ª–∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è)
```

### 4. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ GitHub Pages

```bash
git add .
git commit -m "–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ –≤ 19:00

- –°–æ–∑–¥–∞–Ω–∞ Edge Function daily-photo-notifications
- –£–±—Ä–∞–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑ index-faces –∏ upload.js
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ä–∞–∑ –≤ –¥–µ–Ω—å –≤ 19:00 IST
- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–¥–∫—É –ø–æ –≤—Å–µ–º —Å–≤–æ–∏–º —Ä–µ—Ç—Ä–∏—Ç–∞–º"

git push origin develop

# –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ dev ‚Üí merge –≤ main
git checkout main
git merge develop
git push origin main
# GitHub Pages –∑–∞–¥–µ–ø–ª–æ–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (~1-2 –º–∏–Ω)
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è** ‚Äî –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤—Ä—É—á–Ω—É—é (—Å–º. –ø.3 –≤—ã—à–µ)
2. **–ù–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å –≤ 19:00** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
   - Dashboard ‚Üí Edge Functions ‚Üí daily-photo-notifications ‚Üí Logs
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏: "Daily notifications complete: X sent, Y failed, Z blocked"
3. **Telegram** ‚Äî —É—á–∞—Å—Ç–Ω–∏–∫–∏ —Ä–µ—Ç—Ä–∏—Ç–æ–≤ —Å –Ω–æ–≤—ã–º–∏ —Ñ–æ—Ç–æ –∑–∞ –¥–µ–Ω—å –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å**: IST = UTC+5:30, –ø–æ—ç—Ç–æ–º—É cron `30 13 * * *` (13:30 UTC) = 19:00 IST
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `uploaded_at` (TIMESTAMPTZ) –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ñ–æ—Ç–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏**: –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ IST ‚Üí UTC –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –∫ –ë–î
- **–ü–ª—é—Ä–∞–ª–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `pluralizePhotos()` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ–∫–æ–Ω—á–∞–Ω–∏–π (—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è/—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏/—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π)
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ `telegram_chat_id` –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –±–æ—Ç–∞ (403)

### –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: `selectedFiles` (–ø—Ä–µ–≤—å—é) vs `currentUploadBatch` (–∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- **–ú–æ–º–µ–Ω—Ç –æ—á–∏—Å—Ç–∫–∏**: –°—Ä–∞–∑—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∑–∞–≥—Ä—É–∑–∫–∏, –¥–æ –Ω–∞—á–∞–ª–∞ —Ü–∏–∫–ª–∞
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –§–æ—Ç–æ–≥—Ä–∞—Ñ –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é –ø–∞—Ä—Ç–∏—é —Ñ–æ—Ç–æ, –ø–æ–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∞—è –≥—Ä—É–∑–∏—Ç—Å—è
- **–ò–∑–æ–ª—è—Ü–∏—è**: Retry –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–±–æ—Ç–∞—é—Ç —Å –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–º —Å–Ω–∞–ø—à–æ—Ç–æ–º (`currentUploadBatch`)

---

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

```
supabase/functions/daily-photo-notifications/index.ts  # –ù–æ–≤—ã–π —Ñ–∞–π–ª: –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞
supabase/functions/index-faces/index.ts                # –ò–∑–º–µ–Ω—ë–Ω: —É–±—Ä–∞–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
supabase/133_setup_daily_photo_notifications_cron.sql  # –ù–æ–≤—ã–π —Ñ–∞–π–ª: –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ cron
photos/js/upload.js                                    # –ò–∑–º–µ–Ω—ë–Ω: —É–±—Ä–∞–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è + —Ñ–∏–∫—Å –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞
docs/changes/2026-02-18-daily-photo-notifications.md   # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ photos/js/upload.js

**–£–±—Ä–∞–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
- `-` `sendNewPhotosNotification()` (—Ñ—É–Ω–∫—Ü–∏—è)
- `-` `pluralizePhotos()` (—Ñ—É–Ω–∫—Ü–∏—è)
- `-` `notificationSent` (—Ñ–ª–∞–≥)
- `-` –í—ã–∑–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑ polling

**–§–∏–∫—Å –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞:**
- `+` `currentUploadBatch` (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)
- `~` `startUpload()` ‚Äî –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ batch, –æ—á–∏—Å—Ç–∫–∞ selectedFiles
- `~` `renderFileList(files)` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä
- `~` `retryFile(index)` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç currentUploadBatch
- `~` `resetForm()` ‚Äî –æ—á–∏—â–∞–µ—Ç –æ–±–∞ –º–∞—Å—Å–∏–≤–∞
